(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8dbaab56"],{4262:function(e,o,r){"use strict";r("f3e5")},6758:function(e,o,r){"use strict";r.r(o);var t=function(){var e=this,o=e.$createElement,r=e._self._c||o;return r("div",[r("login-app",{attrs:{alertInfo:e.alertInfo,progressLoader:e.loading,userNotEnabled:e.userNotEnabled},on:{login:e.login,loginWithGoogle:e.loginWithGoogle,sendMail:e.sendMail}}),r("overlay",{ref:"overlay"})],1)},a=[],n=r("be3b"),s=r("6cd4"),i=function(){var e=this,o=e.$createElement,r=e._self._c||o;return r("auth-template",{attrs:{title:"Login",alert:e.alertInfo&&!e.progressLoader,isBarber:e.isBarber,goBackRoute:"search",userNotEnabled:e.userNotEnabled},on:{sendMail:e.sendMail}},[r("form",{on:{submit:function(o){return o.preventDefault(),e.logar.apply(null,arguments)}}},[r("div",{staticClass:"text-center"},[r("btn-primary",{attrs:{text:"Logar com e-mail e senha",loading:e.progressLoader},on:{clicked:e.openFormDialog}})],1),r("gbutton",{staticClass:"mt-4 mx-auto d-inline-block",attrs:{params:e.params,renderParams:e.renderParams,onSuccess:e.loginWithGoogle}},[e._v(" Logar com o Google ")]),r("div",{staticClass:"d-block mt-12"},[r("btn-secondary",{attrs:{text:"Recuperar senha",dark:""},on:{clicked:e.recoveryPassword}})],1),r("div",{staticClass:"mt-4 d-block"},[r("btn-secondary",{attrs:{text:"Cadastrar-se"},on:{clicked:function(o){return e.register()}}})],1)],1),r("v-dialog",{attrs:{transition:"dialog-bottom-transition",width:"350",persistent:""},model:{value:e.formDialog,callback:function(o){e.formDialog=o},expression:"formDialog"}},[r("v-card",{staticClass:"modal-content pa-4",attrs:{dark:""}},[r("div",{staticClass:"text-right"},[r("v-btn",{attrs:{icon:"",dark:""},on:{click:function(o){e.formDialog=!1}}},[r("v-icon",[e._v("mdi-close")])],1)],1),r("div",[r("div",{staticClass:"text-center"},[r("img",{staticClass:"logo",attrs:{src:"/logo.png"}})]),r("div",{staticClass:"form-group"},[r("v-text-field",{staticClass:"email",attrs:{id:"email",name:"email",dark:"",label:"E-mail",rules:e.emailRules,success:e.isEmailValid(e.email),clearable:"",required:"","validate-on-blur":""},on:{keyup:function(o){return!o.type.indexOf("key")&&e._k(o.keyCode,"enter",13,o.key,"Enter")?null:e.focusToNext("password")},input:function(o){return e.onInputField("email")}},scopedSlots:e._u([{key:"prepend-inner",fn:function(){return[r("v-icon",{staticClass:"outlined material-icons-outlined mr-2",attrs:{dense:""}},[e._v("mail")])]},proxy:!0}]),model:{value:e.email,callback:function(o){e.email=o},expression:"email"}})],1),r("div",{staticClass:"form-group"},[r("v-text-field",{ref:"password",attrs:{id:"password",success:e.isPasswordValid(e.email),dark:"",type:e.showPassword?"text":"password",label:"Senha",color:"success","append-icon":e.showPassword?"visibility_off":"remove_red_eye",rules:e.passwordRules,clearable:"",name:"password",required:"","validate-on-blur":""},on:{"click:append":function(o){e.showPassword=!e.showPassword},keyup:function(o){return!o.type.indexOf("key")&&e._k(o.keyCode,"enter",13,o.key,"Enter")?null:e.enterClick.apply(null,arguments)},input:function(o){return e.onInputField("password")}},scopedSlots:e._u([{key:"prepend-inner",fn:function(){return[r("v-icon",{staticClass:"material-icons-outlined mr-2",attrs:{dense:""}},[e._v("vpn_key")])]},proxy:!0}]),model:{value:e.password,callback:function(o){e.password=o},expression:"password"}})],1),r("input",{directives:[{name:"model",rawName:"v-model",value:e.formToken,expression:"formToken"}],staticClass:"d-none",attrs:{type:"text",name:"formToken",required:""},domProps:{value:e.formToken},on:{input:function(o){o.target.composing||(e.formToken=o.target.value)}}}),r("div",{staticClass:"text-center mt-6"},[r("btn-primary",{staticClass:"btnLogin",attrs:{text:"LOGAR",loading:e.progressLoader},on:{clicked:e.login}})],1)])])],1)],1)},l=[],c=r("e571"),d=r.n(c),u=r("94bb"),p=r("a30b"),h=r("5cbb"),f=r("ef49"),b=r("2c3c"),g=r("2ce5"),m=r("5988"),v=r("be1f"),w={name:"Login",components:{AuthTemplate:u["a"],BtnPrimary:p["a"],BtnSecondary:h["a"],gbutton:d.a},mixins:[f["a"],b["a"],g["a"],m["a"],s["a"],v["a"]],props:{progressLoader:{default:!1},alertInfo:{default:!1},isBarber:{default:!1},userNotEnabled:{default:!1}},data:function(){return{showPassword:!1,email:"",formDialog:!1,formToken:"",password:"",params:{client_id:"69364991955-nfb8lar5v22bfikoba0imp8vjmscr23h.apps.googleusercontent.com"},renderParams:{height:45,width:200,theme:"dark"}}},methods:{loginWithGoogle:function(e){var o=e.getBasicProfile(),r={google_id:o.getId(),name:o.getName(),email:o.getEmail(),formToken:this.formToken};this.$emit("loginWithGoogle",r)},enterClick:function(){this.login()},isFormValid:function(){return!!this.isEmailValid(this.email)&&!!this.isPasswordValid(this.password)},login:function(){if(this.isFormValid()){var e={email:this.email,password:this.password,formToken:this.formToken};this.$emit("login",e)}else this.showSnackbarErro("Preencha todos os dados corretamente!")},onInputField:function(e){var o=this;setTimeout((function(){var r=document.querySelector("#".concat(e));r&&(r.value=o.$data[e])}),100)},openFormDialog:function(){this.formDialog=!0,setTimeout((function(){document.querySelector("#email").focus()}),500)},register:function(){this.isBarber?this.goTo("register-barber"):this.goTo("register")},recoveryPassword:function(){this.isBarber?this.goTo("barber-recovery-password"):this.goTo("recovery-password")},sendMail:function(){this.$emit("sendMail")}}},y=w,S=(r("4262"),r("2877")),k=r("6544"),B=r.n(k),E=r("8336"),O=r("b0af"),x=r("169a"),C=r("132d"),G=r("8654"),T=Object(S["a"])(y,i,l,!1,null,"1383cd38",null),I=T.exports;B()(T,{VBtn:E["a"],VCard:O["a"],VDialog:x["a"],VIcon:C["a"],VTextField:G["a"]});var N=r("8c08"),_={name:"Login",components:{LoginApp:I,Overlay:N["a"]},mixins:[s["a"],m["a"],g["a"]],data:function(){return{alertInfo:null,loading:!1,userNotEnabled:!1}},mounted:function(){this.userNotEnabled=!1},methods:{login:function(e){var o=this;this.loading=!0,n["a"].post("/auth/user/login",e).then((function(e){if(200===e.data.codigo){var r=e.data.corpo;o.setUser(r)}else o.setError(e.data.corpo)})).catch((function(e){window.console.log(e),o.setError("Não foi possível realizar login na aplicação!")}))},loginWithGoogle:function(e){var o=this;this.loading=!0,this.$refs.overlay.showOverlay("Carregando..."),n["a"].post("/auth/user/login-google",e).then((function(e){if(200===e.data.codigo){var r=e.data.corpo;o.setUser(r)}else o.setError(e.data.corpo)})).catch((function(){return o.setError("Não foi possível realizar login na aplicação!")}))},onSendMailError:function(e){this.$refs.overlay.hideOverlayError(e),this.showSnackbarErro(e)},sendMail:function(){var e=this,o="";this.$refs.overlay.showOverlay("Enviando e-mail..."),n["a"].post("/user/resend-register-mail",{email:this.user.email}).then((function(r){200===r.status?200===r.data.codigo?(e.userNotEnabled=!1,e.alertInfo=!1,e.$refs.overlay.hideOverlaySuccess(r.data.corpo)):e.onSendMailError(r.data.corpo):e.onSendMailError(o)})).catch((function(){return e.onSendMailError(o)}))},setError:function(e){this.$refs.overlay.hideOverlay(),this.alertInfo=null,this.loading=!1,this.showSnackbarErro(e)},setUser:function(e){var o=localStorage.lastUrl;this.storeUser(e);var r=this.getUser();r?(r.enabled&&(o?this.goToPath(o):this.goTo("search")),this.loading=!1,this.userNotEnabled=!0,this.$refs.overlay.hideOverlay()):this.setError("Não foi possível recuperar o token de acesso à aplicação!")}}},P=_,$=Object(S["a"])(P,t,a,!1,null,null,null);o["default"]=$.exports},ef49:function(e,o,r){"use strict";var t=r("be3b"),a={computed:{barbershop:{set:function(){},get:function(){return this.$store.getters["BarbershopStore/barbershop"]}},barbershopState:function(){return this.$store.getters["BarbershopStore/barbershop"]}},methods:{storeBarbershop:function(e){this.$store.dispatch("BarbershopStore/store",e)},getBarbershop:function(){return this.$store.getters["BarbershopStore/barbershop"]},getBarbershopByIdOnService:function(e){var o=this;t["a"].get("/barbershop/".concat(e)).then((function(e){200===e.data.codigo?o.onGetBarbershopByIdOnServiceSuccess(e.data.corpo):o.onGetBarbershopByIdOnServiceError(e.data.corpo)})).catch((function(e){o.onGetBarbershopByIdOnServiceError("Não foi possível recuperar os dados da barbearia!"),window.console.log(e)}))},onGetBarbershopByIdOnServiceSuccess:function(e){window.console.log("onGetBarbershopByIdOnServiceSuccess: "+e)},onGetBarbershopByIdOnServiceError:function(e){window.console.log("onGetBarbershopByIdOnServiceError: "+e)},getBarbershopAllOnService:function(){var e=this;t["a"].get("/barbershop").then((function(o){200===o.data.codigo?e.onGetBarbershopAllOnServiceSuccess(o.data.corpo):e.onGetBarbershopAllOnServiceError(o.data.corpo)})).catch((function(o){e.onGetBarbershopAllOnServiceError("Não foi possível recuperar os dados da barbearia!"),window.console.log(o)}))},onGetBarbershopAllOnServiceSuccess:function(e){window.console.log("onGetBarbershopAllOnServiceSuccess: "+e)},onGetBarbershopAllOnServiceError:function(e){window.console.log("onGetBarbershopAllOnServiceError: "+e)},syncBarbershop:function(){var e=this;t["a"].get("/barbershop/".concat(this.barbershop.id)).then((function(o){200===o.data.codigo&&e.storeBarbershop(o.data.corpo)}))},updateBarbershopOnService:function(e,o){var r=this,a="barbershop/".concat(o);t["a"].put(a,e).then((function(e){200===e.data.codigo?r.onUpdateBarbershopOnServiceSuccess(e.data.corpo):r.onUpdateBarbershopOnServiceError(e.data.corpo)})).catch((function(e){window.console.log(e),r.onUpdateBarbershopOnServiceError("Não foi possível atualizar os dados da barbearia!")}))},onUpdateBarbershopOnServiceSuccess:function(e){window.console.log("onUpdateBarbershopOnServiceSuccess: "+e)},onUpdateBarbershopOnServiceError:function(e){window.console.log("onUpdateBarbershopOnServiceError: "+e)}}};o["a"]=a},f3e5:function(e,o,r){}}]);
//# sourceMappingURL=chunk-8dbaab56.af6f387d.js.map